{% extends "components/base.html" %}
{% load static %}

{% block title %}Agendar Cita{% endblock %}

{% block body %}
<div class="min-h-screen pt-24 pb-12 px-3 bg-gradient-to-r from-pink-400 via-purple-500 to-blue-500">
    <div class="flex justify-center">
        <div class="w-full max-w-5xl bg-white/70 backdrop-blur-md rounded-2xl shadow-lg p-6">
            <h3 class="text-2xl text-center font-bold text-pink-800 mb-2">Agendar cita a una clienta</h3>
            <form action="{% url 'agendar_super' %}" method="post" novalidate>
                {% csrf_token %}

                {% if messages %}
                    {% for message in messages %}
                    <div class="toast align-items-center text-bg-{{ message.tags }} border-0 w-100 my-2" role="alert" aria-live="assertive" aria-atomic="true" data-bs-autohide="false">
                        <div class="d-flex">
                            <div class="toast-body">
                                <small>{{ message }}</small>
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close" tabindex="-1"></button>
                        </div>
                    </div>
                    {% endfor %}
                {% endif %}

                <!-- Sección Cita -->
                <div class="row d-flex justify-content-center mb-3">
                    <!-- Calendario (no tocado) -->
                    <div class="col-sm-12 col-md-6 mt-3">
                        <div class="bg-white rounded-lg p-4 mb-4 shadow-md">
                            <h5 class="text-lg text-center font-semibold text-purple-700 mb-4">Selecciona una fecha</h5>
                            <div id="datepicker" data-date="12/03/2012"></div>
                        </div>
                    </div>

                    <!-- Formulario de la cita -->
                    <div class="col-sm-12 col-md-6 mt-3">
                        <div class="bg-white rounded-xl p-4 shadow-md">
                            <h5 class="text-lg text-center font-semibold text-purple-700 mb-4">Datos de la cita</h5>

                            <div class="form-floating mb-3">
                                {{ form_cita.cliente }}
                                <label for="cliente_cita" class="text-pink-700">{{ form_cita.cliente.label }}</label>
                            </div>

                            <div class="form-floating mb-3">
                                {{ form_cita.fecha_cita }}
                                <label for="fecha_cita" class="text-pink-700">{{ form_cita.fecha_cita.label }} </label>
                            </div>

                            <div class="form-floating mb-3">
                                {{ form_cita.horario }}
                                <label for="horario" class="text-pink-700">{{ form_cita.horario.label }}</label>
                            </div>

                            <div class="form-floating mb-3">
                                {{ form_cita.categoria }}
                                <label for="categoria" class="text-pink-700">{{ form_cita.categoria.label }}</label>
                            </div>

                            <div class="form-control mb-3">
                                <label for="servicios" class="form-label small">{{ form_cita.servicios.label }}</label>
                                {{ form_cita.servicios }}
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Botón -->
                <div class="text-center">
                    <input class="bg-pink-600 hover:bg-pink-700 text-white font-semibold text-sm px-6 py-2 rounded-full shadow transition-all w-full sm:w-1/2"
                        type="submit" value="Registrar cita">
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Bootstrap Datepicker CSS y JS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>
<script defer src="{% static 'js/calendario.js' %}"></script>
{% endblock %}
